<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.demo.comm.mapper.CommonManager">

    <resultMap id="BaseResultMap" type="com.demo.comm.entity.Common">
        <!--@Table -->
        <result property="commonCode" column="COMMON_CODE" jdbcType="CHAR"/>
        <result property="checkField" column="CHECK_FIELD" jdbcType="CHAR"/>
        <result property="isNecessary" column="IS_NECESSARY" jdbcType="CHAR"/>
        <result property="createTime" column="CREATE_TIME" jdbcType="TIMESTAMP"/>
    </resultMap>



    <!--查询spdb.common表中所有信息-->
    <select id="getAllCommonInfo" resultMap="BaseResultMap">
            SELECT * from spdb.common
    </select>

    <!--向spdb.common表中添加一条数据-->
    <insert id="insertCommon" timeout="60"   parameterType="com.demo.comm.entity.Common">
        insert into spdb.common(common_code, check_field, is_necessary, create_time)
         VALUES (#{commonCode},#{checkField},#{isNecessary},default)
    </insert>

    <!--根据Common_Code更新表spdb.common-->
    <update id="updateCommonByCommonCode" parameterType="com.demo.comm.entity.Common">
        update spdb.common set COMMON_CODE =#{commonCode},
                               CHECK_FIELD =#{checkField},
                               IS_NECESSARY=#{isNecessary},
                               CREATE_TIME =default
                where COMMON_CODE =#{commonCode}

    </update>

    <!--根据Common_Code 删除一条数据-->
    <delete id="deleteCommonByCommonCode" parameterType="com.demo.comm.entity.Common">
        delete from spdb.common where COMMON_CODE =#{commonCode}
                                ORDER BY CREATE_TIME
                                LIMIT 10
    </delete>
</mapper>